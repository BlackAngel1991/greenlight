<%
  # BigBlueButton open source conferencing system - http://www.bigbluebutton.org/.
  # Copyright (c) 2018 BigBlueButton Inc. and by respective authors (see below).
  # This program is free software; you can redistribute it and/or modify it under the
  # terms of the GNU Lesser General Public License as published by the Free Software
  # Foundation; either version 3.0 of the License, or (at your option) any later
  # version.
  #
  # BigBlueButton is distributed in the hope that it will be useful, but WITHOUT ANY
  # WARRANTY; without even the implied warranty of MERCHANTABILITY or FITNESS FOR A
  # PARTICULAR PURPOSE. See the GNU Lesser General Public License for more details.
  # You should have received a copy of the GNU Lesser General Public License along
  # with BigBlueButton; if not, see <http://www.gnu.org/licenses/>.
%>

<div id="particles-js" class="background gradient-blue pb-1 color-white" room="<%= @room.uid %>" user="<%= current_user ? current_user.uid : "anonymous" %>" join-name="<%= @join_name %>">
  <div class="container">
    <div class="row pt-9">
      <div class="col-lg-8 col-sm-12">
        <div class="room-title-box mb-3">
          <h1 id="room-title" class="display-5 text-right mb-3 font-weight-400 pb-2"><%= @room.name %></h1>
          <div class="d-flex align-items-center">
            <% if @room.owner.image.blank? %>
              <span class="avatar"><%= @room.owner.name.first %></span>
            <% else %>
              <span class="avatar" style="background-image: url(<%= @room.owner.image %>)"></span>
            <% end %>
            <h5 class="font-weight-normal mr-4 mt-3"><%= @room.owner.name %> (<%= t("room.owner") %>)</h5>
          </div>
        </div>

      </div>
    </div>

    <div class="row">
      <div class="col-lg-8 col-md-12 col-sm-12">
        <%= yield %>
      </div>
    </div>
  </div>
</div>

<% if render_recordings %>
  <%= render "shared/sessions", recordings: @public_recordings, pagy: @pagy, only_public: true, user_recordings: false, title: t("room.recordings") %>
<% end %>
<script>
    $(document).ready(function () {
        particlesJS.load('particles-js', '<%= asset_path 'particlesjs.json' %>', function () {
            console.log('callback - particles.js config loaded');
        });
    });
</script>